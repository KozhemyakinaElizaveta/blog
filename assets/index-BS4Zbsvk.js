import{u as d,b as h,l as x,P as u,j as o,c as a,F as i,L as m,T as l,d as j}from"./index-DNp95QVJ.js";import{F as g,I as f,C as w}from"./Input-DQB6JHOu.js";import{u as b,F as c,P as v}from"./formik.esm-BDdm_Lv4.js";const C=()=>{const s=d(),n=h(),t=b({initialValues:{login:"",password:"",isErrorLogin:""},validate:e=>{const r={};return e.login?e.login.length<2&&(r.login="Логин должен быть больше 2 символов"):r.login="Обязательное поле",e.password?e.password.length<4&&(r.password="Пароль должен быть больше 4 символов"):r.password="Обязательное поле",r},onSubmit:e=>{p(e)}}),p=e=>{x(e.login,e.password).then(({data:r})=>{localStorage.setItem("refresh",r.refreshToken),localStorage.setItem("id",r.userId),r&&s(u.Home)}).catch(()=>{t.setErrors({password:"Неверный логин или пароль",isErrorLogin:"true"}),n({position:"bottom-right",title:"Ошибка",description:"Неверный логин или пароль",status:"error",duration:9e3,isClosable:!0,variant:"top-accent"})})};return t},L=()=>{const s=C(),n=d();return o.jsx(a.form,{onSubmit:s.handleSubmit,children:o.jsxs(i,{bgColor:"white",borderRadius:"20px",w:"673px",h:"421px",flexDirection:"column",alignItems:"center",justify:"center",gap:"16px",children:[o.jsxs(i,{align:"center",gap:"5px",children:[o.jsx(m,{}),o.jsx(l,{fontSize:"36px",fontWeight:700,children:"Blog"})]}),o.jsxs(i,{flexDirection:"column",w:"266px",gap:"16px",align:"center",children:[o.jsxs(g,{isRequired:!0,isInvalid:!!s.touched.login&&!!s.errors.login||!!s.errors.isErrorLogin,children:[o.jsx(f,{id:"login",name:"login",type:"text",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.login,w:"100%",placeholder:"Введите логин"}),o.jsx(c,{children:s.errors.login})]}),o.jsxs(g,{isRequired:!0,isInvalid:!!(s!=null&&s.touched.password)&&!!(s!=null&&s.errors.password),children:[o.jsx(v,{onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.password}),o.jsx(c,{children:s.errors.password})]})]}),o.jsx(j,{isDisabled:!(s.values.login&&s.values.password),type:"submit",children:"Войти"}),o.jsxs(l,{fontWeight:600,fontSize:"14px",color:"gray.500",children:["Нет аккаунта?"," ",o.jsx(a.span,{fontWeight:600,fontSize:"14px",color:"black.100",cursor:"pointer",_hover:{color:"blue.300"},onClick:()=>n(u.Registration),children:"Регистрация"})]})]})})},E=()=>o.jsx(w,{children:o.jsx(L,{})});export{E as default};
